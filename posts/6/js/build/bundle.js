!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(){var e=d.width,t=d.height;l.drawImage(a,0,0,e,t);var n=l.getImageData(0,0,e,t),o=u.fromRawData(e,t,n.data),r=new i.Scene,b=new i.PerspectiveCamera(75,h/p,.1,1e3),f=new i.WebGLRenderer;f.setSize(h,p),m.appendChild(f.domElement);var E=new i.PointLight(16777215);E.position.set(100,200,100),r.add(E),E=new i.DirectionalLight(16777215,1),E.position.set(0,0,0),r.add(E),E=new i.AmbientLight(4210752),r.add(E);var g=o.channels[0],v=o.channels[1],w=o.channels[2],O=new s(g.rows,g.columns);O.apply(function(e,t){this.set(e,t,Math.round((g.get(e,t)+v.get(e,t)+w.get(e,t))/3))});var y,P=O.integral(),T={chunk:!0,iterations:512,duration:10};c.hessianDeterminantAsync(P,0,0,T).then(function(e){y=e;var t=y.min(),n=y.max();y.apply(function(e,o){var a=Math.round((y.get(e,o)-t)/(n-t)*255);y.set(e,o,a)});var o=new i.Geometry;y.apply(function(e,t){o.vertices.push(new i.Vector3(e,t,y.get(e,t)))});for(var a=0;a<y.rows-1;a++)for(var s=0;s<y.columns-1;s++)o.faces.push(new i.Face3(a*y.columns+s,a*y.columns+s+1,(a+1)*y.columns+s)),o.faces.push(new i.Face3(a*y.columns+s+1,(a+1)*y.columns+s,(a+1)*y.columns+s+1));o.computeBoundingSphere(),o.computeFaceNormals(),o.computeVertexNormals();var c=new i.MeshPhongMaterial({color:5617251,side:i.DoubleSide}),u=new i.Mesh(o,c);r.add(u),b.position.set(300,300,300),b.up=new i.Vector3(0,0,1),b.lookAt(new i.Vector3(125,125,0));var m=(new i.OrbitControls(b,f.domElement),function(){requestAnimationFrame(m),f.render(r,b)});m(),console.log("RENDER!")})}var a,i=n(1),r=n(2),s=(n(3),r.Matrix2d),c=(r.Kernel,r.SURF),u=r.Image,m=(r.otsu,document.getElementById("post-six-canvas")),d=document.getElementById("post-six-canvas-2d"),l=d.getContext("2d"),h=500,p=250;a=new Image,a.src="images/simple-shapes.png",a.addEventListener("load",o,!1)},function(e,t){e.exports=Three},function(e,t){e.exports=Vision},function(e,t){var n=Three;n.OrbitControls=function(e,t){function o(){return 2*Math.PI/60/60*H.autoRotateSpeed}function a(){return Math.pow(.95,H.zoomSpeed)}function i(e){Y.theta-=e}function r(e){Y.phi-=e}function s(e){H.object instanceof n.PerspectiveCamera?z/=e:H.object instanceof n.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom*e)),H.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),H.enableZoom=!1)}function c(e){H.object instanceof n.PerspectiveCamera?z*=e:H.object instanceof n.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom/e)),H.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),H.enableZoom=!1)}function u(e){K.set(e.clientX,e.clientY)}function m(e){J.set(e.clientX,e.clientY)}function d(e){W.set(e.clientX,e.clientY)}function l(e){_.set(e.clientX,e.clientY),G.subVectors(_,K);var t=H.domElement===document?H.domElement.body:H.domElement;i(2*Math.PI*G.x/t.clientWidth*H.rotateSpeed),r(2*Math.PI*G.y/t.clientHeight*H.rotateSpeed),K.copy(_),H.update()}function h(e){$.set(e.clientX,e.clientY),ee.subVectors($,J),ee.y>0?s(a()):ee.y<0&&c(a()),J.copy($),H.update()}function p(e){q.set(e.clientX,e.clientY),Q.subVectors(q,W),oe(Q.x,Q.y),W.copy(q),H.update()}function b(e){}function f(e){e.deltaY<0?c(a()):e.deltaY>0&&s(a()),H.update()}function E(e){switch(e.keyCode){case H.keys.UP:oe(0,H.keyPanSpeed),H.update();break;case H.keys.BOTTOM:oe(0,-H.keyPanSpeed),H.update();break;case H.keys.LEFT:oe(H.keyPanSpeed,0),H.update();break;case H.keys.RIGHT:oe(-H.keyPanSpeed,0),H.update()}}function g(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function v(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);J.set(0,o)}function w(e){W.set(e.touches[0].pageX,e.touches[0].pageY)}function O(e){_.set(e.touches[0].pageX,e.touches[0].pageY),G.subVectors(_,K);var t=H.domElement===document?H.domElement.body:H.domElement;i(2*Math.PI*G.x/t.clientWidth*H.rotateSpeed),r(2*Math.PI*G.y/t.clientHeight*H.rotateSpeed),K.copy(_),H.update()}function y(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);$.set(0,o),ee.subVectors($,J),ee.y>0?c(a()):ee.y<0&&s(a()),J.copy($),H.update()}function P(e){q.set(e.touches[0].pageX,e.touches[0].pageY),Q.subVectors(q,W),oe(Q.x,Q.y),W.copy(q),H.update()}function T(e){}function R(e){if(H.enabled!==!1){if(e.preventDefault(),e.button===H.mouseButtons.ORBIT){if(H.enableRotate===!1)return;u(e),F=U.ROTATE}else if(e.button===H.mouseButtons.ZOOM){if(H.enableZoom===!1)return;m(e),F=U.DOLLY}else if(e.button===H.mouseButtons.PAN){if(H.enablePan===!1)return;d(e),F=U.PAN}F!==U.NONE&&(document.addEventListener("mousemove",j,!1),document.addEventListener("mouseup",C,!1),H.dispatchEvent(k))}}function j(e){if(H.enabled!==!1)if(e.preventDefault(),F===U.ROTATE){if(H.enableRotate===!1)return;l(e)}else if(F===U.DOLLY){if(H.enableZoom===!1)return;h(e)}else if(F===U.PAN){if(H.enablePan===!1)return;p(e)}}function C(e){H.enabled!==!1&&(b(e),document.removeEventListener("mousemove",j,!1),document.removeEventListener("mouseup",C,!1),H.dispatchEvent(S),F=U.NONE)}function M(e){H.enabled===!1||H.enableZoom===!1||F!==U.NONE&&F!==U.ROTATE||(e.preventDefault(),e.stopPropagation(),f(e),H.dispatchEvent(k),H.dispatchEvent(S))}function x(e){H.enabled!==!1&&H.enableKeys!==!1&&H.enablePan!==!1&&E(e)}function L(e){if(H.enabled!==!1){switch(e.touches.length){case 1:if(H.enableRotate===!1)return;g(e),F=U.TOUCH_ROTATE;break;case 2:if(H.enableZoom===!1)return;v(e),F=U.TOUCH_DOLLY;break;case 3:if(H.enablePan===!1)return;w(e),F=U.TOUCH_PAN;break;default:F=U.NONE}F!==U.NONE&&H.dispatchEvent(k)}}function N(e){if(H.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(H.enableRotate===!1)return;if(F!==U.TOUCH_ROTATE)return;O(e);break;case 2:if(H.enableZoom===!1)return;if(F!==U.TOUCH_DOLLY)return;y(e);break;case 3:if(H.enablePan===!1)return;if(F!==U.TOUCH_PAN)return;P(e);break;default:F=U.NONE}}function A(e){H.enabled!==!1&&(T(e),H.dispatchEvent(S),F=U.NONE)}function D(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new n.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:n.MOUSE.LEFT,ZOOM:n.MOUSE.MIDDLE,PAN:n.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return I.phi},this.getAzimuthalAngle=function(){return I.theta},this.reset=function(){H.target.copy(H.target0),H.object.position.copy(H.position0),H.object.zoom=H.zoom0,H.object.updateProjectionMatrix(),H.dispatchEvent(V),H.update(),F=U.NONE},this.update=function(){var t=new n.Vector3,a=(new n.Quaternion).setFromUnitVectors(e.up,new n.Vector3(0,1,0)),r=a.clone().inverse(),s=new n.Vector3,c=new n.Quaternion;return function(){var e=H.object.position;return t.copy(e).sub(H.target),t.applyQuaternion(a),I.setFromVector3(t),H.autoRotate&&F===U.NONE&&i(o()),I.theta+=Y.theta,I.phi+=Y.phi,I.theta=Math.max(H.minAzimuthAngle,Math.min(H.maxAzimuthAngle,I.theta)),I.phi=Math.max(H.minPolarAngle,Math.min(H.maxPolarAngle,I.phi)),I.makeSafe(),I.radius*=z,I.radius=Math.max(H.minDistance,Math.min(H.maxDistance,I.radius)),H.target.add(X),t.setFromSpherical(I),t.applyQuaternion(r),e.copy(H.target).add(t),H.object.lookAt(H.target),H.enableDamping===!0?(Y.theta*=1-H.dampingFactor,Y.phi*=1-H.dampingFactor):Y.set(0,0,0),z=1,X.set(0,0,0),!!(B||s.distanceToSquared(H.object.position)>Z||8*(1-c.dot(H.object.quaternion))>Z)&&(H.dispatchEvent(V),s.copy(H.object.position),c.copy(H.object.quaternion),B=!1,!0)}}(),this.dispose=function(){H.domElement.removeEventListener("contextmenu",D,!1),H.domElement.removeEventListener("mousedown",R,!1),H.domElement.removeEventListener("wheel",M,!1),H.domElement.removeEventListener("touchstart",L,!1),H.domElement.removeEventListener("touchend",A,!1),H.domElement.removeEventListener("touchmove",N,!1),document.removeEventListener("mousemove",j,!1),document.removeEventListener("mouseup",C,!1),window.removeEventListener("keydown",x,!1)};var H=this,V={type:"change"},k={type:"start"},S={type:"end"},U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},F=U.NONE,Z=1e-6,I=new n.Spherical,Y=new n.Spherical,z=1,X=new n.Vector3,B=!1,K=new n.Vector2,_=new n.Vector2,G=new n.Vector2,W=new n.Vector2,q=new n.Vector2,Q=new n.Vector2,J=new n.Vector2,$=new n.Vector2,ee=new n.Vector2,te=function(){var e=new n.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),X.add(e)}}(),ne=function(){var e=new n.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),X.add(e)}}(),oe=function(){var e=new n.Vector3;return function(t,o){var a=H.domElement===document?H.domElement.body:H.domElement;if(H.object instanceof n.PerspectiveCamera){var i=H.object.position;e.copy(i).sub(H.target);var r=e.length();r*=Math.tan(H.object.fov/2*Math.PI/180),te(2*t*r/a.clientHeight,H.object.matrix),ne(2*o*r/a.clientHeight,H.object.matrix)}else H.object instanceof n.OrthographicCamera?(te(t*(H.object.right-H.object.left)/H.object.zoom/a.clientWidth,H.object.matrix),ne(o*(H.object.top-H.object.bottom)/H.object.zoom/a.clientHeight,H.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),H.enablePan=!1)}}();H.domElement.addEventListener("contextmenu",D,!1),H.domElement.addEventListener("mousedown",R,!1),H.domElement.addEventListener("wheel",M,!1),H.domElement.addEventListener("touchstart",L,!1),H.domElement.addEventListener("touchend",A,!1),H.domElement.addEventListener("touchmove",N,!1),window.addEventListener("keydown",x,!1),this.update()},n.OrbitControls.prototype=Object.create(n.EventDispatcher.prototype),n.OrbitControls.prototype.constructor=n.OrbitControls,Object.defineProperties(n.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})}]);