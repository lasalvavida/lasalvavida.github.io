!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(){var e=m.width,t=m.height;h.drawImage(E,0,0,e,t);var n=h.getImageData(0,0,e,t),o=u.fromRawData(e,t,n.data),i=new r.Scene,s=new r.PerspectiveCamera(75,p/b,.1,1e3);a=new r.WebGLRenderer,a.setSize(p,b),a.setClearColor(16777215),a.render(i,s),d.appendChild(a.domElement);var g=new r.PointLight(16777215);g.position.set(100,200,100),i.add(g),g=new r.DirectionalLight(16777215,1),g.position.set(0,0,0),i.add(g),g=new r.AmbientLight(4210752),i.add(g);var f=o.channels[0],v=o.channels[1],w=o.channels[2],O=new c(f.rows,f.columns);O.apply(function(e,t){this.set(e,t,Math.round((f.get(e,t)+v.get(e,t)+w.get(e,t))/3))});var y,C=O.integral(),x={chunk:!0,iterations:512,duration:10};l.hessianDeterminantAsync(C,0,0,x).then(function(e){y=e;var t=y.min(),n=y.max();y.apply(function(e,o){var a=Math.round((y.get(e,o)-t)/(n-t)*255);y.set(e,o,a)});var c=new r.Geometry;y.apply(function(e,t){c.vertices.push(new r.Vector3(e-125,t-125,y.get(e,t)))});for(var l=0;l<y.rows-1;l++)for(var u=0;u<y.columns-1;u++){var d=new r.Face3(l*y.columns+u,l*y.columns+u+1,(l+1)*y.columns+u);d.vertexColors[0]=new r.Color("rgb("+o.channels[0].get(l,u)+","+o.channels[1].get(l,u)+","+o.channels[2].get(l,u)+");"),d.vertexColors[1]=new r.Color("rgb("+o.channels[0].get(l,u+1)+","+o.channels[1].get(l,u+1)+","+o.channels[2].get(l,u+1)+");"),d.vertexColors[2]=new r.Color("rgb("+o.channels[0].get(l+1,u)+","+o.channels[1].get(l+1,u)+","+o.channels[2].get(l+1,u)+");"),c.faces.push(d),d=new r.Face3(l*y.columns+u+1,(l+1)*y.columns+u+1,(l+1)*y.columns+u),d.vertexColors[0]=new r.Color("rgb("+o.channels[0].get(l,u+1)+","+o.channels[1].get(l,u+1)+","+o.channels[2].get(l,u+1)+");"),d.vertexColors[1]=new r.Color("rgb("+o.channels[0].get(l+1,u+1)+","+o.channels[1].get(l+1,u+1)+","+o.channels[2].get(l+1,u+1)+");"),d.vertexColors[2]=new r.Color("rgb("+o.channels[0].get(l+1,u)+","+o.channels[1].get(l+1,u)+","+o.channels[2].get(l+1,u)+");"),c.faces.push(d)}c.computeBoundingSphere(),c.computeFaceNormals(),c.computeVertexNormals();var m=new r.MeshPhongMaterial({vertexColors:r.VertexColors,side:r.DoubleSide}),h=new r.Mesh(c,m);i.add(h),s.position.set(300,300,300),s.up=new r.Vector3(0,0,1),s.lookAt(new r.Vector3(125,125,0));var p=(new r.OrbitControls(s,a.domElement),function(){requestAnimationFrame(p),a.render(i,s)});p()})}var a,i=n(1),r=n(2),s=n(3),c=(n(4),s.Matrix2d),l=(s.Kernel,s.SURF),u=s.Image,d=(s.otsu,document.getElementById("post-six-canvas")),m=document.getElementById("post-six-canvas-2d"),h=m.getContext("2d"),p=500,b=250,g=!1,f=i("#post-six-canvas");i("#post-six-toggle-fullscreen").click(function(){a&&(g?(f.css({position:"relative"}),f.width(p),f.height(b),a.setSize(p,b),g=!1):(f.css({position:"fixed"}),f.width(window.innerWidth),f.height(window.innerHeight),a.setSize(window.innerWidth,window.innerHeight),g=!0))});var E;E=new Image,E.src="images/Lenna.png",E.addEventListener("load",o,!1)},function(e,t){e.exports=$},function(e,t){e.exports=Three},function(e,t){e.exports=Vision},function(e,t){var n=Three;n.OrbitControls=function(e,t){function o(){return 2*Math.PI/60/60*H.autoRotateSpeed}function a(){return Math.pow(.95,H.zoomSpeed)}function i(e){I.theta-=e}function r(e){I.phi-=e}function s(e){H.object instanceof n.PerspectiveCamera?Y/=e:H.object instanceof n.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom*e)),H.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),H.enableZoom=!1)}function c(e){H.object instanceof n.PerspectiveCamera?Y*=e:H.object instanceof n.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom/e)),H.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),H.enableZoom=!1)}function l(e){K.set(e.clientX,e.clientY)}function u(e){$.set(e.clientX,e.clientY)}function d(e){G.set(e.clientX,e.clientY)}function m(e){W.set(e.clientX,e.clientY),_.subVectors(W,K);var t=H.domElement===document?H.domElement.body:H.domElement;i(2*Math.PI*_.x/t.clientWidth*H.rotateSpeed),r(2*Math.PI*_.y/t.clientHeight*H.rotateSpeed),K.copy(W),H.update()}function h(e){J.set(e.clientX,e.clientY),ee.subVectors(J,$),ee.y>0?s(a()):ee.y<0&&c(a()),$.copy(J),H.update()}function p(e){q.set(e.clientX,e.clientY),Q.subVectors(q,G),oe(Q.x,Q.y),G.copy(q),H.update()}function b(e){}function g(e){e.deltaY<0?c(a()):e.deltaY>0&&s(a()),H.update()}function f(e){switch(e.keyCode){case H.keys.UP:oe(0,H.keyPanSpeed),H.update();break;case H.keys.BOTTOM:oe(0,-H.keyPanSpeed),H.update();break;case H.keys.LEFT:oe(H.keyPanSpeed,0),H.update();break;case H.keys.RIGHT:oe(-H.keyPanSpeed,0),H.update()}}function E(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function v(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);$.set(0,o)}function w(e){G.set(e.touches[0].pageX,e.touches[0].pageY)}function O(e){W.set(e.touches[0].pageX,e.touches[0].pageY),_.subVectors(W,K);var t=H.domElement===document?H.domElement.body:H.domElement;i(2*Math.PI*_.x/t.clientWidth*H.rotateSpeed),r(2*Math.PI*_.y/t.clientHeight*H.rotateSpeed),K.copy(W),H.update()}function y(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);J.set(0,o),ee.subVectors(J,$),ee.y>0?c(a()):ee.y<0&&s(a()),$.copy(J),H.update()}function C(e){q.set(e.touches[0].pageX,e.touches[0].pageY),Q.subVectors(q,G),oe(Q.x,Q.y),G.copy(q),H.update()}function x(e){}function P(e){if(H.enabled!==!1){if(e.preventDefault(),e.button===H.mouseButtons.ORBIT){if(H.enableRotate===!1)return;l(e),F=U.ROTATE}else if(e.button===H.mouseButtons.ZOOM){if(H.enableZoom===!1)return;u(e),F=U.DOLLY}else if(e.button===H.mouseButtons.PAN){if(H.enablePan===!1)return;d(e),F=U.PAN}F!==U.NONE&&(document.addEventListener("mousemove",T,!1),document.addEventListener("mouseup",R,!1),H.dispatchEvent(V))}}function T(e){if(H.enabled!==!1)if(e.preventDefault(),F===U.ROTATE){if(H.enableRotate===!1)return;m(e)}else if(F===U.DOLLY){if(H.enableZoom===!1)return;h(e)}else if(F===U.PAN){if(H.enablePan===!1)return;p(e)}}function R(e){H.enabled!==!1&&(b(e),document.removeEventListener("mousemove",T,!1),document.removeEventListener("mouseup",R,!1),H.dispatchEvent(k),F=U.NONE)}function j(e){H.enabled===!1||H.enableZoom===!1||F!==U.NONE&&F!==U.ROTATE||(e.preventDefault(),e.stopPropagation(),g(e),H.dispatchEvent(V),H.dispatchEvent(k))}function M(e){H.enabled!==!1&&H.enableKeys!==!1&&H.enablePan!==!1&&f(e)}function L(e){if(H.enabled!==!1){switch(e.touches.length){case 1:if(H.enableRotate===!1)return;E(e),F=U.TOUCH_ROTATE;break;case 2:if(H.enableZoom===!1)return;v(e),F=U.TOUCH_DOLLY;break;case 3:if(H.enablePan===!1)return;w(e),F=U.TOUCH_PAN;break;default:F=U.NONE}F!==U.NONE&&H.dispatchEvent(V)}}function A(e){if(H.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(H.enableRotate===!1)return;if(F!==U.TOUCH_ROTATE)return;O(e);break;case 2:if(H.enableZoom===!1)return;if(F!==U.TOUCH_DOLLY)return;y(e);break;case 3:if(H.enablePan===!1)return;if(F!==U.TOUCH_PAN)return;C(e);break;default:F=U.NONE}}function N(e){H.enabled!==!1&&(x(e),H.dispatchEvent(k),F=U.NONE)}function D(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new n.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:n.MOUSE.LEFT,ZOOM:n.MOUSE.MIDDLE,PAN:n.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return z.phi},this.getAzimuthalAngle=function(){return z.theta},this.reset=function(){H.target.copy(H.target0),H.object.position.copy(H.position0),H.object.zoom=H.zoom0,H.object.updateProjectionMatrix(),H.dispatchEvent(S),H.update(),F=U.NONE},this.update=function(){var t=new n.Vector3,a=(new n.Quaternion).setFromUnitVectors(e.up,new n.Vector3(0,1,0)),r=a.clone().inverse(),s=new n.Vector3,c=new n.Quaternion;return function(){var e=H.object.position;return t.copy(e).sub(H.target),t.applyQuaternion(a),z.setFromVector3(t),H.autoRotate&&F===U.NONE&&i(o()),z.theta+=I.theta,z.phi+=I.phi,z.theta=Math.max(H.minAzimuthAngle,Math.min(H.maxAzimuthAngle,z.theta)),z.phi=Math.max(H.minPolarAngle,Math.min(H.maxPolarAngle,z.phi)),z.makeSafe(),z.radius*=Y,z.radius=Math.max(H.minDistance,Math.min(H.maxDistance,z.radius)),H.target.add(X),t.setFromSpherical(z),t.applyQuaternion(r),e.copy(H.target).add(t),H.object.lookAt(H.target),H.enableDamping===!0?(I.theta*=1-H.dampingFactor,I.phi*=1-H.dampingFactor):I.set(0,0,0),Y=1,X.set(0,0,0),!!(B||s.distanceToSquared(H.object.position)>Z||8*(1-c.dot(H.object.quaternion))>Z)&&(H.dispatchEvent(S),s.copy(H.object.position),c.copy(H.object.quaternion),B=!1,!0)}}(),this.dispose=function(){H.domElement.removeEventListener("contextmenu",D,!1),H.domElement.removeEventListener("mousedown",P,!1),H.domElement.removeEventListener("wheel",j,!1),H.domElement.removeEventListener("touchstart",L,!1),H.domElement.removeEventListener("touchend",N,!1),H.domElement.removeEventListener("touchmove",A,!1),document.removeEventListener("mousemove",T,!1),document.removeEventListener("mouseup",R,!1),window.removeEventListener("keydown",M,!1)};var H=this,S={type:"change"},V={type:"start"},k={type:"end"},U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},F=U.NONE,Z=1e-6,z=new n.Spherical,I=new n.Spherical,Y=1,X=new n.Vector3,B=!1,K=new n.Vector2,W=new n.Vector2,_=new n.Vector2,G=new n.Vector2,q=new n.Vector2,Q=new n.Vector2,$=new n.Vector2,J=new n.Vector2,ee=new n.Vector2,te=function(){var e=new n.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),X.add(e)}}(),ne=function(){var e=new n.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),X.add(e)}}(),oe=function(){var e=new n.Vector3;return function(t,o){var a=H.domElement===document?H.domElement.body:H.domElement;if(H.object instanceof n.PerspectiveCamera){var i=H.object.position;e.copy(i).sub(H.target);var r=e.length();r*=Math.tan(H.object.fov/2*Math.PI/180),te(2*t*r/a.clientHeight,H.object.matrix),ne(2*o*r/a.clientHeight,H.object.matrix)}else H.object instanceof n.OrthographicCamera?(te(t*(H.object.right-H.object.left)/H.object.zoom/a.clientWidth,H.object.matrix),ne(o*(H.object.top-H.object.bottom)/H.object.zoom/a.clientHeight,H.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),H.enablePan=!1)}}();H.domElement.addEventListener("contextmenu",D,!1),H.domElement.addEventListener("mousedown",P,!1),H.domElement.addEventListener("wheel",j,!1),H.domElement.addEventListener("touchstart",L,!1),H.domElement.addEventListener("touchend",N,!1),H.domElement.addEventListener("touchmove",A,!1),window.addEventListener("keydown",M,!1),this.update()},n.OrbitControls.prototype=Object.create(n.EventDispatcher.prototype),n.OrbitControls.prototype.constructor=n.OrbitControls,Object.defineProperties(n.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})}]);